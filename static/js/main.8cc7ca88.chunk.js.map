{"version":3,"sources":["components/Searchbar/Searchbar.js","components/Api/Api.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Loader/Loader.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","inputValue","handleInput","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","axios","defaults","baseURL","params","key","image_type","orientation","per_page","api","getImages","a","page","get","q","data","hits","console","log","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleCloseOnBackdrop","target","window","addEventListener","removeEventListener","createPortal","onClick","children","ImageGalleryItem","showModal","toggleModal","webformatURL","tags","largeImageURL","src","alt","style","display","maxWidth","height","Loading","color","width","Button","loadMore","ImageGallery","images","status","prevState","prevProps","prevValue","prevPage","nextPage","searchMoreImages","fetchApiImages","then","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","message","map","image","id","length","App","handleSearchImages","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8cc7ca88.chunk.js","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default class Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    inputValue: '',\n  };\n\n  handleInput = e => {\n    this.setState({ inputValue: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    if (this.state.inputValue.trim() === '') {\n      toast.error('Введите запрос.');\n      return;\n    }\n    this.props.onSubmit(this.state.inputValue);\n    this.setState({ inputValue: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleInput}\n            value={this.state.inputValue}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import axios from 'axios';\n\nconst API_KEY = '19136435-96f0ae3906c94a349fe1f1440';\nconst BASE_URL = 'https://pixabay.com/api/';\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  per_page: 12,\n};\n\nconst getImages = async ({ value, page = 1 }) => {\n  try {\n    const { data } = await axios.get('', {\n      params: { q: value, page },\n    });\n    return data.hits;\n  } catch (error) {\n    console.log('error', { error });\n    return [];\n  }\n};\n\nconst api = {\n  getImages,\n};\n\nexport default api;\n\n// function getImages(value, page = 1) {\n//   const ApiKey = '19996191-7ce9197af192fed24478377bf';\n//   const BASE_URL = 'https://pixabay.com/api/';\n\n//   return fetch(\n//     `${BASE_URL}?q=${value}&page=${page}&key=${ApiKey}&image_type=photo&orientation=horizontal&per_page=12`,\n//   ).then(response => {\n//     if (response.ok) {\n//       return response.json();\n//     }\n//     return Promise.reject(\n//       new Error(`There is no picture with this name: ${value}`),\n//     );\n//   });\n// }\n// const api = {\n//   getImages,\n// };\n\n// export default api;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleCloseOnBackdrop = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleCloseOnBackdrop}>\n        <div className=\"Modal\">\n          {/* <img src=\"\" alt=\"\" /> */}\n          {this.props.children}\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Modal from '../Modal';\n\nexport default class ImageGalleryItem extends Component {\n  static propTypes = {\n    webformatURL: PropTypes.string.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n    tags: PropTypes.string,\n  };\n  state = {\n    showModal: false,\n  };\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { webformatURL, tags, largeImageURL } = this.props;\n    const { showModal } = this.state;\n\n    return (\n      <li className=\"ImageGalleryItem\">\n        <img\n          src={webformatURL}\n          alt={tags}\n          className=\"ImageGalleryItem-image\"\n          onClick={this.toggleModal}\n        />\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img\n              style={{\n                display: 'block',\n                maxWidth: '800px',\n                height: 'auto',\n              }}\n              src={largeImageURL}\n              alt={tags}\n            />\n          </Modal>\n        )}\n      </li>\n    );\n  }\n}\n","import Loader from 'react-loader-spinner';\n\nexport default function Loading() {\n  return (\n    <div>\n      <Loader\n        className=\"status\"\n        type=\"ThreeDots\"\n        color=\"#00BFFF\"\n        height={80}\n        width={80}\n      />\n      <p className=\"status\">Loading...</p>\n    </div>\n  );\n}\n","import PropTypes from 'prop-types';\n\nfunction Button({ loadMore }) {\n  return (\n    <div className=\"Button-block\">\n      <button type=\"button\" className=\"Button\" onClick={loadMore}>\n        Load more\n      </button>\n    </div>\n  );\n}\n\nButton.propTypes = {\n  loadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport fetchApiImages from '../Api';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Loading from '../Loader';\nimport Button from '../Button';\n\nexport default class ImageGallery extends Component {\n  static propTypes = {\n    inputValue: PropTypes.string.isRequired,\n  };\n\n  // static defaultProps = {\n  // };\n\n  state = {\n    images: null,\n    page: 1,\n    error: null,\n    status: 'idle',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevValue = prevProps.inputValue;\n    const value = this.props.inputValue;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevValue !== value) {\n      // this.setState({ status: 'pending' });\n      this.setState({ images: [], page: 1 });\n    }\n\n    if (prevValue !== value || prevPage !== nextPage) {\n      this.searchMoreImages(value, nextPage);\n    }\n  }\n\n  searchMoreImages(value, nextPage) {\n    this.setState({ status: 'pending' });\n\n    fetchApiImages\n      .getImages(value, nextPage)\n      .then(images => {\n        this.setState(prevState => ({\n          // images: [...prevState.images, ...images.hits],\n          images: [...prevState.images, ...images],\n\n          status: 'resolved',\n        }));\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }))\n      .finally(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      });\n  }\n\n  loadMore = () => {\n    this.setState(prevState => {\n      return {\n        page: prevState.page + 1,\n      };\n    });\n  };\n\n  render() {\n    const { error, status, images } = this.state;\n\n    if (status === 'idle') {\n      return (\n        <div>\n          <p className=\"status\">Введите название искомой картинки</p>\n        </div>\n      );\n    }\n\n    if (status === 'pending') {\n      return <Loading />;\n    }\n\n    if (status === 'rejected') {\n      return (\n        <div>\n          <p className=\"status\">{error.message}</p>\n        </div>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            {images.map(image => (\n              <ImageGalleryItem {...image} key={image.id} />\n            ))}\n          </ul>\n          {(images.length > 0 || status === 'resolved') && (\n            <Button loadMore={this.loadMore} />\n          )}\n        </>\n      );\n    }\n  }\n}\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\n\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nclass App extends Component {\n  state = {\n    inputValue: '',\n  };\n\n  handleSearchImages = inputValue => {\n    this.setState({ inputValue });\n  };\n\n  render() {\n    const { inputValue } = this.state;\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleSearchImages} />\n        <ImageGallery inputValue={inputValue} />\n\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// ReactDOM.render(<App />, document.querySelector('#root'));\n"],"sourceRoot":""}