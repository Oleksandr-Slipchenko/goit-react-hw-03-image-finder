{"version":3,"sources":["components/Searchbar/Searchbar.js","components/Api/Api.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Loader/Loader.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","inputValue","handleInput","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","api","fetchApi","page","ApiKey","BASE_URL","fetch","then","response","ok","json","Promise","reject","Error","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleCloseOnBackdrop","target","window","addEventListener","removeEventListener","createPortal","onClick","children","ImageGalleryItem","showModal","toggleModal","webformatURL","tags","largeImageURL","src","alt","style","display","maxWidth","height","Loading","color","width","Button","loadMore","ImageGallery","images","status","prevState","prevProps","prevValue","prevPage","nextPage","searchMoreImages","fetchApiImages","hits","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","message","map","image","key","id","length","App","handleSearchImages","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5b8a87fb.chunk.js","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default class Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    inputValue: '',\n  };\n\n  handleInput = e => {\n    this.setState({ inputValue: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    if (this.state.inputValue.trim() === '') {\n      toast.error('Введите запрос.');\n      return;\n    }\n    this.props.onSubmit(this.state.inputValue);\n    this.setState({ inputValue: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleInput}\n            value={this.state.inputValue}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","function fetchApi(value, page = 1) {\n  const ApiKey = '19996191-7ce9197af192fed24478377bf';\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  return fetch(\n    `${BASE_URL}?q=${value}&page=${page}&key=${ApiKey}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(\n      new Error(`There is no picture with this name: ${value}`),\n    );\n  });\n}\nconst api = {\n  fetchApi,\n};\n\nexport default api;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleCloseOnBackdrop = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleCloseOnBackdrop}>\n        <div className=\"Modal\">\n          {/* <img src=\"\" alt=\"\" /> */}\n          {this.props.children}\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Modal from '../Modal';\n\nexport default class ImageGalleryItem extends Component {\n  static propTypes = {\n    webformatURL: PropTypes.string.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n    tags: PropTypes.string,\n  };\n  state = {\n    showModal: false,\n  };\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { webformatURL, tags, largeImageURL } = this.props;\n    const { showModal } = this.state;\n\n    return (\n      <li className=\"ImageGalleryItem\">\n        <img\n          src={webformatURL}\n          alt={tags}\n          className=\"ImageGalleryItem-image\"\n          onClick={this.toggleModal}\n        />\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img\n              style={{\n                display: 'block',\n                maxWidth: '800px',\n                height: 'auto',\n              }}\n              src={largeImageURL}\n              alt={tags}\n            />\n          </Modal>\n        )}\n      </li>\n    );\n  }\n}\n","import Loader from 'react-loader-spinner';\n\nexport default function Loading() {\n  return (\n    <div>\n      <Loader\n        className=\"status\"\n        type=\"ThreeDots\"\n        color=\"#00BFFF\"\n        height={80}\n        width={80}\n      />\n      <p className=\"status\">Loading...</p>\n    </div>\n  );\n}\n","import PropTypes from 'prop-types';\n\nfunction Button({ loadMore }) {\n  return (\n    <div className=\"Button-block\">\n      <button type=\"button\" className=\"Button\" onClick={loadMore}>\n        Load more\n      </button>\n    </div>\n  );\n}\n\nButton.propTypes = {\n  loadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport fetchApiImages from '../Api';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Loading from '../Loader';\nimport Button from '../Button';\n\nexport default class ImageGallery extends Component {\n  static propTypes = {\n    inputValue: PropTypes.string.isRequired,\n  };\n\n  // static defaultProps = {\n  // };\n\n  state = {\n    images: null,\n    page: 1,\n    error: null,\n    status: 'idle',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevValue = prevProps.inputValue;\n    const value = this.props.inputValue;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevValue !== value) {\n      // this.setState({ status: 'pending' });\n      this.setState({ images: [], page: 1 });\n    }\n\n    if (prevValue !== value || prevPage !== nextPage) {\n      this.searchMoreImages(value, nextPage);\n    }\n  }\n\n  searchMoreImages(value, nextPage) {\n    this.setState({ status: 'pending' });\n\n    fetchApiImages\n      .fetchApi(value, nextPage)\n      .then(images => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...images.hits],\n          status: 'resolved',\n        }));\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }))\n      .finally(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      });\n  }\n\n  loadMore = () => {\n    this.setState(prevState => {\n      return {\n        page: prevState.page + 1,\n      };\n    });\n  };\n\n  render() {\n    const { error, status, images } = this.state;\n\n    if (status === 'idle') {\n      return (\n        <div>\n          <p className=\"status\">Введите название искомой картинки</p>\n        </div>\n      );\n    }\n\n    if (status === 'pending') {\n      return <Loading />;\n    }\n\n    if (status === 'rejected') {\n      return (\n        <div>\n          <p className=\"status\">{error.message}</p>\n        </div>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            {images.map(image => (\n              <ImageGalleryItem {...image} key={image.id} />\n            ))}\n          </ul>\n          {(images.length > 0 || status === 'resolved') && (\n            <Button loadMore={this.loadMore} />\n          )}\n        </>\n      );\n    }\n  }\n}\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\n\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nclass App extends Component {\n  state = {\n    inputValue: '',\n  };\n\n  handleSearchImages = inputValue => {\n    this.setState({ inputValue });\n  };\n\n  render() {\n    const { inputValue } = this.state;\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleSearchImages} />\n        <ImageGallery inputValue={inputValue} />\n\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// ReactDOM.render(<App />, document.querySelector('#root'));\n"],"sourceRoot":""}